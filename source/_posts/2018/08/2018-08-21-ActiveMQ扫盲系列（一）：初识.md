---
title: ActiveMQ扫盲系列（一）：初识
categories:
  - 【104】风住尘香花已尽之消息队列和缓存
tags:
  - ActiveMQ
comments: true
abbrlink: 4bf2d1c
date: 2018-08-21 15:39:43
---
【引言】ActiveMQ作为一代经典的消息队列，虽然没怎么用过，但难免以后会用到，所谓未雨绸缪，也就先趁着有精力预研一番吧！
<div align=center><img src="/img/2018/2018-08-21-02.jpg" width="500"/></div>
<!-- more -->

# 概念

## MQ的定义
&emsp;&emsp;MQ全称为Message Queue, 消息队列（MQ）是一种应用程序对应用程序的通信方法。应用程序通过写和检索出入列队的针对应用程序的数据（消息）来通信，而无需专用连接来链接它们。消息传递指的是程序之间通过在消息中发送数据进行通信，而不是通过直接调用彼此来通信，直接调用通常是用于诸如远程过程调用的技术。

## MQ的特点
&emsp;&emsp;MQ的消费-生产者模型的一个典型的代表，一端往消息队列中不断的写入消息，而另一端则可以读取或者订阅队列中的消息。MQ和JMS类似，但不同的是JMS是SUN JAVA消息中间件服务的一个标准和API定义，而MQ则是遵循了AMQP协议的具体实现和产品。

## JMS的定义
&emsp;&emsp;JMS（Java Messaging Service）是Java平台上有关面向消息中间件(MOM)的技术规范，它便于消息系统中的Java应用程序进行消息交换,并且通过提供标准的产生、发送、接收消息的接口简化企业应用的开发，翻译为Java消息服务；用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信

# ActiveMQ

## 基本定义
&emsp;&emsp;ActiveMQ 是Apache出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完全支持JMS1.1和J2EE 1.4规范的 JMS Provider实现,尽管JMS规范出台已经是很久的事情了,但是JMS在当今的J2EE应用中间仍然扮演着特殊的地位。

## ActiveMQ的优点
&emsp;&emsp;是一个快速的开源消息组件(框架)，支持集群，同等网络，自动检测，TCP，SSL，广播，持久化，XA，和J2EE1.4容器无缝结合，并且支持轻量级容器和大多数跨语言客户端上的Java虚拟机。消息异步接受，减少软件多系统集成的耦合度。消息可靠接收，确保消息在中间件可靠保存，多个消息也可以组成原子事务。

## ActiveMQ的劣势
&emsp;&emsp;ActiveMQ默认的配置性能偏低，需要优化配置，但是配置文件复杂，ActiveMQ本身不提供管理工具；示例代码少；主页上的文档看上去比较全面，但是缺乏一种有效的组织方式，文档只有片段，用户很难由浅入深进行了解，二、文档整体的专业性太强。在研究阶段可以通过查maillist、看Javadoc、分析源代码来了解。

## 通信模式
<img style="clear: both;display: block;margin:auto;" src="/img/2018/2018-08-21-06.jpg" width="60%">

### 点对点(queue)
- 一个消息只能被一个服务接收
- 消息一旦被消费，就会消失
- 如果没有被消费，就会一直等待，直到被消费
- 多个服务监听同一个消费空间，先到先得

### 发布/订阅(topic)
- 一个消息可以被多个服务接收
- 订阅一个主题的消费者，只能消费自它订阅之后发布的消息。
- 消费端如果在生产端发送消息之后启动，是接收不到消息的，除非生产端对消息进行了持久化(例如广播，只有当时听到的人能听到信息)
- 消息是被推送和拉取的(消息生产端和消费端)，而不是mq服务器去主动发送的（类似于kafka）

# 下载和安装

## 下载
&emsp;&emsp;最新版本：http://activemq.apache.org/activemq-5155-release.html

## 安装
&emsp;&emsp;So easy，开箱即用！解压完后，按照机器是32位还是64位自行选择启动bat脚本文件，双击运行就OK了，比如我的电脑安装后的启动脚本路径：
```
D:\ProgramsGreen\apache-activemq-5.15.5\bin\win64\activemq.bat
```

## 验证
&emsp;&emsp;启动脚本后就是哗哗哗一通CMD窗口刷屏的节奏，等到出现下面一堆日志时，就可以打开 http://127.0.0.1:8161/admin/ 进入web管理平台了（默认用户名密码admin/admin）：
```
jvm 1    |  INFO | ActiveMQ WebConsole available at http://0.0.0.0:8161/
jvm 1    |  INFO | ActiveMQ Jolokia REST API available at http://0.0.0.0:8161/api/jolokia/
jvm 1    |  INFO | Initializing Spring FrameworkServlet 'dispatcher'
jvm 1    |  INFO | No Spring WebApplicationInitializer types detected on classpath
jvm 1    |  INFO | jolokia-agent: Using policy access restrictor classpath:/jolokia-access.xml
```
<img style="clear: both;display: block;margin:auto;" src="/img/2018/2018-08-21-03.jpg" width="75%">