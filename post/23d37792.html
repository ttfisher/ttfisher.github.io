<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">






<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css">


  <meta name="keywords" content="Redis,Big Data,">








  <link rel="shortcut icon" type="image/x-icon" href="https://github.com/ttfisher/images/raw/master/00-head.jpg?v=5.1.1">






<meta name="description" content="【引言】作为一个开发人员，稍微有一些开发经验的话，多多少少也会听说过redis的大名，你可以把它当做缓存，也可以把它作为消息队列，它可以做很多事情，而且它的性能还很强大，所以，这里开一个专题来聊聊关于Redis的点点滴滴吧！">
<meta name="keywords" content="Redis,Big Data">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis扫盲系列（一）：Redis基础入门">
<meta property="og:url" content="https://ttfisher.github.io/post/23d37792.html">
<meta property="og:site_name" content="Modern Shine">
<meta property="og:description" content="【引言】作为一个开发人员，稍微有一些开发经验的话，多多少少也会听说过redis的大名，你可以把它当做缓存，也可以把它作为消息队列，它可以做很多事情，而且它的性能还很强大，所以，这里开一个专题来聊聊关于Redis的点点滴滴吧！">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://github.com/ttfisher/images/raw/master/2018/2018-08-01-08.jpg">
<meta property="og:image" content="https://github.com/ttfisher/images/raw/master/2018/2018-08-02-02.jpg">
<meta property="og:image" content="https://github.com/ttfisher/images/raw/master/2018/2018-08-02-01.jpg">
<meta property="og:updated_time" content="2019-07-11T23:51:38.970Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis扫盲系列（一）：Redis基础入门">
<meta name="twitter:description" content="【引言】作为一个开发人员，稍微有一些开发经验的话，多多少少也会听说过redis的大名，你可以把它当做缓存，也可以把它作为消息队列，它可以做很多事情，而且它的性能还很强大，所以，这里开一个专题来聊聊关于Redis的点点滴滴吧！">
<meta name="twitter:image" content="https://github.com/ttfisher/images/raw/master/2018/2018-08-01-08.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"right","display":"post","offset":15,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '0TSUY3VASO',
      apiKey: '304d5df2e2f136515f540ea8c77beb60',
      indexName: 'ttfisher',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://ttfisher.github.io/post/23d37792.html">





  <title>Redis扫盲系列（一）：Redis基础入门 | Modern Shine</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Modern Shine</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">莫等闲，白了少年头...</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
			<!--增加的代码 start-->
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://ttfisher.github.io/post/23d37792.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lin.C">
      <meta itemprop="description" content>
      <meta itemprop="image" content="http://pm4hdun71.bkt.clouddn.com/img/00-head.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Modern Shine">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Redis扫盲系列（一）：Redis基础入门</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-01T14:55:55+08:00">
                2018-08-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/缓存-消息-数据库/" itemprop="url" rel="index">
                    <span itemprop="name">缓存&消息&数据库</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/缓存-消息-数据库/Redis/" itemprop="url" rel="index">
                    <span itemprop="name">Redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>【引言】作为一个开发人员，稍微有一些开发经验的话，多多少少也会听说过redis的大名，你可以把它当做缓存，也可以把它作为消息队列，它可以做很多事情，而且它的性能还很强大，所以，这里开一个专题来聊聊关于Redis的点点滴滴吧！</p>
<p><div align="center"><img src="https://github.com/ttfisher/images/raw/master/2018/2018-08-01-08.jpg" width="55%"></div><br><a id="more"></a></p>
<h1 id="Redis入门"><a href="#Redis入门" class="headerlink" title="Redis入门"></a>Redis入门</h1><h2 id="Redis是什么"><a href="#Redis是什么" class="headerlink" title="Redis是什么"></a>Redis是什么</h2><p>&emsp;&emsp;[官方定义]Redis(Remote DIctionary Server) is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker. It supports data structures such as strings, hashes, lists, sets, sorted sets with range queries, bitmaps, hyperloglogs and geospatial indexes with radius queries. Redis has built-in replication, Lua scripting, LRU eviction, transactions and different levels of on-disk persistence, and provides high availability via Redis Sentinel and automatic partitioning with Redis Cluster.</p>
<h2 id="Redis支持的数据结构"><a href="#Redis支持的数据结构" class="headerlink" title="Redis支持的数据结构"></a>Redis支持的数据结构</h2><ul>
<li>String: 字符串</li>
<li>Hash: 散列</li>
<li>List: 列表</li>
<li>Set: 集合</li>
<li>Sorted Set: 有序集合</li>
</ul>
<h2 id="Redis的几大特点"><a href="#Redis的几大特点" class="headerlink" title="Redis的几大特点"></a>Redis的几大特点</h2><ul>
<li>Redis支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</li>
<li>Redis不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。</li>
<li>Redis支持数据的备份，即master-slave模式的数据备份。</li>
</ul>
<h2 id="Redis的优势"><a href="#Redis的优势" class="headerlink" title="Redis的优势"></a>Redis的优势</h2><ul>
<li>性能极高 – Redis能读的速度是110000次/s,写的速度是81000次/s 。</li>
<li>丰富的数据类型 – Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作。</li>
<li>原子 – Redis的所有操作都是原子性的，意思就是要么成功执行要么失败完全不执行。单个操作是原子性的。多个操作也支持事务，即原子性，通过MULTI和EXEC指令包起来。</li>
<li>丰富的特性 – Redis还支持 publish/subscribe, 通知, key 过期等等特性。</li>
<li>Redis运行在内存中但是可以持久化到磁盘（RDB、AOF）</li>
</ul>
<h1 id="Redis常用命令"><a href="#Redis常用命令" class="headerlink" title="Redis常用命令"></a>Redis常用命令</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 连接</span><br><span class="line">$ redis-cli -h host -p port -a password</span><br><span class="line"></span><br><span class="line"># 清库</span><br><span class="line">$ redis 127.0.0.1:6379&gt;flushdb</span><br><span class="line"></span><br><span class="line"># 查看大小</span><br><span class="line">$ redis 127.0.0.1:6379&gt;dbsize</span><br><span class="line"></span><br><span class="line"># 退出</span><br><span class="line">$ redis 127.0.0.1:6379&gt;quit</span><br><span class="line"></span><br><span class="line"># 获取 redis 服务器的统计信息</span><br><span class="line">$ redis 127.0.0.1:6379&gt; INFO</span><br><span class="line"></span><br><span class="line"># 常用命令使用模式</span><br><span class="line">$ redis 127.0.0.1:6379&gt; COMMAND KEY_NAME Option</span><br></pre></td></tr></table></figure>
<h2 id="Redis连接"><a href="#Redis连接" class="headerlink" title="Redis连接"></a>Redis连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- AUTH password 验证密码是否正确</span><br><span class="line">- ECHO message 打印字符串</span><br><span class="line">- PING 查看服务是否运行</span><br><span class="line">- QUIT 关闭当前连接</span><br><span class="line">- SELECT index 切换到指定的数据库</span><br><span class="line"></span><br><span class="line"># 操作实例</span><br><span class="line">redis 127.0.0.1:6379&gt; AUTH &quot;password&quot;</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:6379&gt; PING</span><br><span class="line">PONG</span><br></pre></td></tr></table></figure>
<h2 id="脚本执行"><a href="#脚本执行" class="headerlink" title="脚本执行"></a>脚本执行</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Redis 脚本使用 Lua 解释器来执行脚本。 Redis 2.6 版本通过内嵌支持 Lua 环境。执行脚本的常用命令为 EVAL。</span><br><span class="line">- EVAL script numkeys key [key ...] arg [arg ...] 执行 Lua 脚本。</span><br><span class="line">- EVALSHA sha1 numkeys key [key ...] arg [arg ...] 执行 Lua 脚本。</span><br><span class="line">- SCRIPT EXISTS script [script ...] 查看指定的脚本是否已经被保存在缓存当中。</span><br><span class="line">- SCRIPT FLUSH 从脚本缓存中移除所有脚本。</span><br><span class="line">- SCRIPT KILL 杀死当前正在运行的 Lua 脚本。</span><br><span class="line">- SCRIPT LOAD script 将脚本 script 添加到脚本缓存中，但并不立即执行这个脚本。</span><br><span class="line"></span><br><span class="line"># 操作实例</span><br><span class="line">redis 127.0.0.1:6379&gt; EVAL script numkeys key [key ...] arg [arg ...]</span><br></pre></td></tr></table></figure>
<h2 id="key常用操作"><a href="#key常用操作" class="headerlink" title="key常用操作"></a>key常用操作</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- DEL key 该命令用于在 key 存在时删除 key。</span><br><span class="line">- DUMP key 序列化给定 key ，并返回被序列化的值。</span><br><span class="line">- EXISTS key 检查给定 key 是否存在。</span><br><span class="line">- EXPIRE key seconds 为给定 key 设置过期时间。</span><br><span class="line">- EXPIREAT key timestamp EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 </span><br><span class="line">             不同在于 EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)。</span><br><span class="line">- PEXPIRE key milliseconds 设置 key 的过期时间以毫秒计。</span><br><span class="line">- PEXPIREAT key milliseconds-timestamp 设置 key 过期时间的时间戳(unix timestamp) 以毫秒计</span><br><span class="line">- KEYS pattern 查找所有符合给定模式( pattern)的 key 。</span><br><span class="line">- MOVE key db 将当前数据库的 key 移动到给定的数据库 db 当中。</span><br><span class="line">- PERSIST key 移除 key 的过期时间，key 将持久保持。</span><br><span class="line">- PTTL key 以毫秒为单位返回 key 的剩余的过期时间。</span><br><span class="line">- TTL key 以秒为单位，返回给定 key 的剩余生存时间(TTL, time to live)。</span><br><span class="line">- RANDOMKEY 从当前数据库中随机返回一个 key 。</span><br><span class="line">- RENAME key newkey 修改 key 的名称</span><br><span class="line">- RENAMENX key newkey 仅当 newkey 不存在时，将 key 改名为 newkey 。</span><br><span class="line">- TYPE key 返回 key 所储存的值的类型。</span><br></pre></td></tr></table></figure>
<h2 id="string操作（前缀：无）"><a href="#string操作（前缀：无）" class="headerlink" title="string操作（前缀：无）"></a>string操作（前缀：无）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- SET key value 设置指定 key 的值</span><br><span class="line">- GET key 获取指定 key 的值。</span><br><span class="line">- GETRANGE key start end 返回 key 中字符串值的子字符</span><br><span class="line">- GETSET key value 将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</span><br><span class="line">- GETBIT key offset 对 key 所储存的字符串值，获取指定偏移量上的位(bit)。</span><br><span class="line">- MGET key1 [key2..] 获取所有(一个或多个)给定 key 的值。</span><br><span class="line">- SETBIT key offset value 对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)。</span><br><span class="line">- SETEX key seconds value 将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)。</span><br><span class="line">- SETNX key value 只有在 key 不存在时设置 key 的值。</span><br><span class="line">- SETRANGE key offset value 用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始。</span><br><span class="line">- STRLEN key 返回 key 所储存的字符串值的长度。</span><br><span class="line">- MSET key value [key value ...] 同时设置一个或多个 key-value 对。</span><br><span class="line">- MSETNX key value [key value ...] 同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在。</span><br><span class="line">- PSETEX key milliseconds value 和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间。</span><br><span class="line">- INCR key 将 key 中储存的数字值增一。</span><br><span class="line">- INCRBY key increment 将 key 所储存的值加上给定的增量值（increment） 。</span><br><span class="line">- INCRBYFLOAT key increment 将 key 所储存的值加上给定的浮点增量值（increment） 。</span><br><span class="line">- DECR key 将 key 中储存的数字值减一。</span><br><span class="line">- DECRBY key decrement key 所储存的值减去给定的减量值（decrement） 。</span><br><span class="line">- APPEND key value 如果key已经存在并且是一个字符串，APPEND命令将指定的value追加到该 key 原来值（value）的末尾。</span><br></pre></td></tr></table></figure>
<h2 id="hash操作（前缀：H）"><a href="#hash操作（前缀：H）" class="headerlink" title="hash操作（前缀：H）"></a>hash操作（前缀：H）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">- HDEL key field1 [field2] 删除一个或多个哈希表字段</span><br><span class="line">- HEXISTS key field 查看哈希表 key 中，指定的字段是否存在。</span><br><span class="line">- HGET key field 获取存储在哈希表中指定字段的值。</span><br><span class="line">- HGETALL key 获取在哈希表中指定 key 的所有字段和值</span><br><span class="line">- HINCRBY key field increment 为哈希表 key 中的指定字段的整数值加上增量 increment 。</span><br><span class="line">- HINCRBYFLOAT key field increment 为哈希表 key 中的指定字段的浮点数值加上增量 increment 。</span><br><span class="line">- HKEYS key 获取所有哈希表中的字段</span><br><span class="line">- HLEN key 获取哈希表中字段的数量</span><br><span class="line">- HMGET key field1 [field2] 获取所有给定字段的值</span><br><span class="line">- HMSET key field1 value1 [field2 value2 ] 同时将多个 field-value (域-值)对设置到哈希表 key 中。</span><br><span class="line">- HSET key field value 将哈希表 key 中的字段 field 的值设为 value 。</span><br><span class="line">- HSETNX key field value 只有在字段 field 不存在时，设置哈希表字段的值。</span><br><span class="line">- HVALS key 获取哈希表中所有值</span><br><span class="line">- HSCAN key cursor [MATCH pattern] [COUNT count] 迭代哈希表中的键值对。</span><br><span class="line"></span><br><span class="line"># 操作实例</span><br><span class="line">127.0.0.1:6379&gt;  HMSET runoobkey name &quot;redis tutorial&quot; description &quot;redis basic commands for caching&quot; likes 20 visitors 23000</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt;  HGETALL runoobkey</span><br><span class="line">1) &quot;name&quot;</span><br><span class="line">2) &quot;redis tutorial&quot;</span><br><span class="line">3) &quot;description&quot;</span><br><span class="line">4) &quot;redis basic commands for caching&quot;</span><br><span class="line">5) &quot;likes&quot;</span><br><span class="line">6) &quot;20&quot;</span><br><span class="line">7) &quot;visitors&quot;</span><br><span class="line">8) &quot;23000&quot;</span><br></pre></td></tr></table></figure>
<h2 id="list操作（前缀：L、R、BL、BR）"><a href="#list操作（前缀：L、R、BL、BR）" class="headerlink" title="list操作（前缀：L、R、BL、BR）"></a>list操作（前缀：L、R、BL、BR）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- BLPOP key1 [key2 ] timeout 移出并获取列表的第一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</span><br><span class="line">- BRPOP key1 [key2 ] timeout 移出并获取列表的最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</span><br><span class="line">- BRPOPLPUSH source destination timeout 从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它； 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</span><br><span class="line">- LINDEX key index 通过索引获取列表中的元素</span><br><span class="line">- LINSERT key BEFORE|AFTER pivot value 在列表的元素前或者后插入元素</span><br><span class="line">- LLEN key 获取列表长度</span><br><span class="line">- LPOP key 移出并获取列表的第一个元素</span><br><span class="line">- LPUSH key value1 [value2] 将一个或多个值插入到列表头部</span><br><span class="line">- LPUSHX key value 将一个值插入到已存在的列表头部</span><br><span class="line">- LRANGE key start stop 获取列表指定范围内的元素</span><br><span class="line">- LREM key count value 移除列表元素</span><br><span class="line">- LSET key index value 通过索引设置列表元素的值</span><br><span class="line">- LTRIM key start stop 对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。</span><br><span class="line">- RPOP key 移除并获取列表最后一个元素</span><br><span class="line">- RPOPLPUSH source destination 移除列表的最后一个元素，并将该元素添加到另一个列表并返回</span><br><span class="line">- RPUSH key value1 [value2] 在列表中添加一个或多个值</span><br><span class="line">- RPUSHX key value 为已存在的列表添加值</span><br><span class="line"></span><br><span class="line">// 操作实例</span><br><span class="line">redis 127.0.0.1:6379&gt; LPUSH runoobkey redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; LPUSH runoobkey mongodb</span><br><span class="line">(integer) 2</span><br><span class="line">redis 127.0.0.1:6379&gt; LPUSH runoobkey mysql</span><br><span class="line">(integer) 3</span><br><span class="line">redis 127.0.0.1:6379&gt; LRANGE runoobkey 0 10</span><br><span class="line"></span><br><span class="line">1) &quot;mysql&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure>
<h2 id="set操作（前缀：S）"><a href="#set操作（前缀：S）" class="headerlink" title="set操作（前缀：S）"></a>set操作（前缀：S）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">- SADD key member1 [member2] 向集合添加一个或多个成员</span><br><span class="line">- SCARD key 获取集合的成员数</span><br><span class="line">- SDIFF key1 [key2] 返回给定所有集合的差集</span><br><span class="line">- SDIFFSTORE destination key1 [key2] 返回给定所有集合的差集并存储在 destination 中</span><br><span class="line">- SINTER key1 [key2] 返回给定所有集合的交集</span><br><span class="line">- SINTERSTORE destination key1 [key2] 返回给定所有集合的交集并存储在 destination 中</span><br><span class="line">- SISMEMBER key member 判断 member 元素是否是集合 key 的成员</span><br><span class="line">- SMEMBERS key 返回集合中的所有成员</span><br><span class="line">- SMOVE source destination member 将 member 元素从 source 集合移动到 destination 集合</span><br><span class="line">- SPOP key 移除并返回集合中的一个随机元素</span><br><span class="line">- SRANDMEMBER key [count] 返回集合中一个或多个随机数</span><br><span class="line">- SREM key member1 [member2] 移除集合中一个或多个成员</span><br><span class="line">- SUNION key1 [key2] 返回所有给定集合的并集</span><br><span class="line">- SUNIONSTORE destination key1 [key2] 所有给定集合的并集存储在 destination 集合中</span><br><span class="line">- SSCAN key cursor [MATCH pattern] [COUNT count] 迭代集合中的元素</span><br><span class="line"></span><br><span class="line"># 操作实例</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mysql</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; SADD runoobkey mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; SMEMBERS runoobkey</span><br><span class="line"></span><br><span class="line">1) &quot;mysql&quot;</span><br><span class="line">2) &quot;mongodb&quot;</span><br><span class="line">3) &quot;redis&quot;</span><br></pre></td></tr></table></figure>
<h2 id="sorted-set操作（前缀：S）"><a href="#sorted-set操作（前缀：S）" class="headerlink" title="sorted set操作（前缀：S）"></a>sorted set操作（前缀：S）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">- ZADD key score1 member1 [score2 member2] 向有序集合添加一个或多个成员，或者更新已存在成员的分数</span><br><span class="line">- ZCARD key 获取有序集合的成员数</span><br><span class="line">- ZCOUNT key min max 计算在有序集合中指定区间分数的成员数</span><br><span class="line">- ZINCRBY key increment member 有序集合中对指定成员的分数加上增量 increment</span><br><span class="line">- ZINTERSTORE destination numkeys key [key ...] 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</span><br><span class="line">- ZLEXCOUNT key min max 在有序集合中计算指定字典区间内成员数量</span><br><span class="line">- ZRANGE key start stop [WITHSCORES] 通过索引区间返回有序集合成指定区间内的成员</span><br><span class="line">- ZRANGEBYLEX key min max [LIMIT offset count] 通过字典区间返回有序集合的成员</span><br><span class="line">- ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT] 通过分数返回有序集合指定区间内的成员</span><br><span class="line">- ZRANK key member 返回有序集合中指定成员的索引</span><br><span class="line">- ZREM key member [member ...] 移除有序集合中的一个或多个成员</span><br><span class="line">- ZREMRANGEBYLEX key min max 移除有序集合中给定的字典区间的所有成员</span><br><span class="line">- ZREMRANGEBYRANK key start stop 移除有序集合中给定的排名区间的所有成员</span><br><span class="line">- ZREMRANGEBYSCORE key min max 移除有序集合中给定的分数区间的所有成员</span><br><span class="line">- ZREVRANGE key start stop [WITHSCORES] 返回有序集中指定区间内的成员，通过索引，分数从高到底</span><br><span class="line">- ZREVRANGEBYSCORE key max min [WITHSCORES] 返回有序集中指定分数区间内的成员，分数从高到低排序</span><br><span class="line">- ZREVRANK key member 返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</span><br><span class="line">- ZSCORE key member 返回有序集中，成员的分数值</span><br><span class="line">- ZUNIONSTORE destination numkeys key [key ...] 计算给定的一个或多个有序集的并集，并存储在新的 key 中</span><br><span class="line">- ZSCAN key cursor [MATCH pattern] [COUNT count] 迭代有序集合中的元素（包括元素成员和元素分值）</span><br><span class="line"></span><br><span class="line"># 操作实例</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 1 redis</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 2 mongodb</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql</span><br><span class="line">(integer) 1</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 3 mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; ZADD runoobkey 4 mysql</span><br><span class="line">(integer) 0</span><br><span class="line">redis 127.0.0.1:6379&gt; ZRANGE runoobkey 0 10 WITHSCORES</span><br><span class="line"></span><br><span class="line">1) &quot;redis&quot;</span><br><span class="line">2) &quot;1&quot;</span><br><span class="line">3) &quot;mongodb&quot;</span><br><span class="line">4) &quot;2&quot;</span><br><span class="line">5) &quot;mysql&quot;</span><br><span class="line">6) &quot;4&quot;</span><br></pre></td></tr></table></figure>
<h1 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h1><p>&emsp;&emsp;Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。</p>
<h2 id="什么是基数"><a href="#什么是基数" class="headerlink" title="什么是基数?"></a>什么是基数?</h2><p>&emsp;&emsp;比如数据集 {1, 3, 5, 7, 5, 7, 8}， 那么这个数据集的基数集为 {1, 3, 5 ,7, 8}, 基数(不重复元素的个数)为5。 基数估计就是在误差可接受的范围内，快速计算基数。</p>
<h2 id="四种基数统计方案"><a href="#四种基数统计方案" class="headerlink" title="四种基数统计方案"></a>四种基数统计方案</h2><blockquote>
<p>比如：在线人数统计</p>
</blockquote>
<ul>
<li>使用有序集合：这种方案能够同时储存在线的用户和用户上线时间，能够执行非常多的聚合计算，但是所消耗的内存也是非常可观的。</li>
<li>使用集合：这种方案能储存在线的用户，也能够执行一定的聚合计算，相对有序集合，所消耗的内存要小些，但是随着用户量的增多，消耗内存空间也处于增加状态。</li>
<li>使用hyperloglog：这种方案无论统计多少在线用户， 消耗的内存都是12k，但是只能给出在线用户的统计信息，无法获取准确的在线用户名单。</li>
<li>使用bitmap：这种方案还是比较好的，在尽可能节省内存空间情况下，记录在线用户的情况，而且能做一定的聚合运算。</li>
</ul>
<h1 id="Redis的发布订阅"><a href="#Redis的发布订阅" class="headerlink" title="Redis的发布订阅"></a>Redis的发布订阅</h1><p>&emsp;&emsp;Redis 发布订阅(pub/sub)是一种消息通信模式：发送者(pub)发送消息，订阅者(sub)接收消息。Redis 客户端可以订阅任意数量的频道。</p>
<h2 id="基本模型"><a href="#基本模型" class="headerlink" title="基本模型"></a>基本模型</h2><p>&emsp;&emsp;下面两张图，第一张代表了订阅端对频道的订阅情况（即：3个客户端订阅了channel1这个频道的消息）；第二张图则表示当发送端发送消息时，消息通过该频道会推送到所有已订阅该频道的客户端（注：这里的模式和kafka稍有差异，kafka是客户端主动去pull消息的，而redis的客户端接收消息是由channel发起的push操作，本质不一样）。<br><img style="clear: both;display: block;margin:auto;" src="https://github.com/ttfisher/images/raw/master/2018/2018-08-02-02.jpg" width="40%"><br><img style="clear: both;display: block;margin:auto;" src="https://github.com/ttfisher/images/raw/master/2018/2018-08-02-01.jpg" width="40%"></p>
<h2 id="命令说明"><a href="#命令说明" class="headerlink" title="命令说明"></a>命令说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- PSUBSCRIBE pattern [pattern ...] 订阅一个或多个符合给定模式的频道。</span><br><span class="line">- PUBSUB subcommand [argument [argument ...]] 查看订阅与发布系统状态。</span><br><span class="line">- PUBLISH channel message 将信息发送到指定的频道。</span><br><span class="line">- PUNSUBSCRIBE [pattern [pattern ...]] 退订所有给定模式的频道。</span><br><span class="line">- SUBSCRIBE channel [channel ...] 订阅给定的一个或多个频道的信息。</span><br><span class="line">- UNSUBSCRIBE [channel [channel ...]] 指退订给定的频道。</span><br></pre></td></tr></table></figure>
<h2 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># client订阅一个channel</span><br><span class="line">redis 127.0.0.1:6379&gt; SUBSCRIBE redisChat</span><br><span class="line"></span><br><span class="line">Reading messages... (press Ctrl-C to quit)</span><br><span class="line">1) &quot;subscribe&quot;</span><br><span class="line">2) &quot;redisChat&quot;</span><br><span class="line">3) (integer) 1</span><br><span class="line"></span><br><span class="line"># server向该channel中publish一条消息</span><br><span class="line">redis 127.0.0.1:6379&gt; PUBLISH redisChat &quot;Redis is a great caching technique&quot;</span><br><span class="line"></span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; PUBLISH redisChat &quot;Learn redis by runoob.com&quot;</span><br><span class="line"></span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line"># 订阅者的客户端会显示如下消息</span><br><span class="line">1) &quot;message&quot;</span><br><span class="line">2) &quot;redisChat&quot;</span><br><span class="line">3) &quot;Redis is a great caching technique&quot;</span><br><span class="line"></span><br><span class="line">1) &quot;message&quot;</span><br><span class="line">2) &quot;redisChat&quot;</span><br><span class="line">3) &quot;Learn redis by runoob.com&quot;</span><br></pre></td></tr></table></figure>
<h1 id="Redis的事务"><a href="#Redis的事务" class="headerlink" title="Redis的事务"></a>Redis的事务</h1><h2 id="事务特性"><a href="#事务特性" class="headerlink" title="事务特性"></a>事务特性</h2><p>&emsp;&emsp;单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的。<br>&emsp;&emsp;事务可以理解为一个打包的批量执行脚本，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做。redis的事务执行有以下特征：</p>
<ul>
<li>批量操作在发送 EXEC 命令前被放入队列缓存。</li>
<li>收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。</li>
<li>在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。</li>
</ul>
<h2 id="命令说明-1"><a href="#命令说明-1" class="headerlink" title="命令说明"></a>命令说明</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- DISCARD 取消事务，放弃执行事务块内的所有命令。</span><br><span class="line">- EXEC 执行所有事务块内的命令。</span><br><span class="line">- MULTI 标记一个事务块的开始。</span><br><span class="line">- UNWATCH 取消 WATCH 命令对所有 key 的监视。</span><br><span class="line">- WATCH key [key ...] 监视一个(或多个) key ，如果在事务执行之前这个(或这些) key 被其他命令所改动，那么事务将被打断。</span><br></pre></td></tr></table></figure>
<h2 id="操作实例"><a href="#操作实例" class="headerlink" title="操作实例"></a>操作实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 如果在 set b bbb 处失败，set a 已成功不会回滚，set c 还会继续执行。</span><br><span class="line">redis 127.0.0.1:7000&gt; multi</span><br><span class="line">OK</span><br><span class="line">redis 127.0.0.1:7000&gt; set a aaa</span><br><span class="line">QUEUED</span><br><span class="line">redis 127.0.0.1:7000&gt; set b bbb</span><br><span class="line">QUEUED</span><br><span class="line">redis 127.0.0.1:7000&gt; set c ccc</span><br><span class="line">QUEUED</span><br><span class="line">redis 127.0.0.1:7000&gt; exec</span><br><span class="line">1) OK</span><br><span class="line">2) OK</span><br><span class="line">3) OK</span><br></pre></td></tr></table></figure>
<h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><p><strong>&emsp;&emsp;From redis docs on transactions: It’s important to note that even when a command fails, all the other commands in the queue are processed – Redis will not stop the processing of commands.</strong></p>
<h1 id="Redis的安装"><a href="#Redis的安装" class="headerlink" title="Redis的安装"></a>Redis的安装</h1><h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>&emsp;&emsp;这个章节实际是验证OpenResty和Redis结合做反爬虫时发现没有<br>&emsp;&emsp;Redis因为没有多余的外部依赖，直接编译安装即可（但5.0以上新版本的貌似有些差异，暂不考虑），在这里我们用了4.0.2的发行版进行的编译安装，一般自测就直接使用redis-server启动了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# wget http://download.redis.io/releases/redis-4.0.2.tar.gz</span><br><span class="line">......</span><br><span class="line">[root@localhost ~]# tar -zxvf redis-4.0.2.tar.gz </span><br><span class="line">......</span><br><span class="line">[root@localhost ~]# cd redis-4.0.2</span><br><span class="line">[root@localhost redis-4.0.2]# make</span><br><span class="line">cd src &amp;&amp; make all</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.2/src&apos;</span><br><span class="line">......</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.2/src&apos;</span><br><span class="line">[root@localhost redis-4.0.2]# make install</span><br><span class="line">cd src &amp;&amp; make install</span><br><span class="line">make[1]: Entering directory `/root/redis-4.0.2/src&apos;</span><br><span class="line">......</span><br><span class="line">    INSTALL install</span><br><span class="line">make[1]: Leaving directory `/root/redis-4.0.2/src&apos;</span><br><span class="line">[root@localhost redis-4.0.2]# redis-server </span><br><span class="line">5367:C 18 Dec 21:15:26.420 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">5367:C 18 Dec 21:15:26.420 # Redis version=4.0.2, bits=64, commit=00000000, modified=0, pid=5367, just started</span><br><span class="line">5367:C 18 Dec 21:15:26.420 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf</span><br><span class="line">5367:M 18 Dec 21:15:26.421 * Increased maximum number of open files to 10032 (it was originally set to 1024).</span><br><span class="line">                _._                                                  </span><br><span class="line">           _.-``__ &apos;&apos;-._                                             </span><br><span class="line">      _.-``    `.  `_.  &apos;&apos;-._           Redis 4.0.2 (00000000/0) 64 bit</span><br><span class="line">  .-`` .-```.  ```\/    _.,_ &apos;&apos;-._                                   </span><br><span class="line"> (    &apos;      ,       .-`  | `,    )     Running in standalone mode</span><br><span class="line"> |`-._`-...-` __...-.``-._|&apos;` _.-&apos;|     Port: 6379</span><br><span class="line"> |    `-._   `._    /     _.-&apos;    |     PID: 5367</span><br><span class="line">  `-._    `-._  `-./  _.-&apos;    _.-&apos;                                   </span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|                                  </span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |           http://redis.io        </span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;                                   </span><br><span class="line"> |`-._`-._    `-.__.-&apos;    _.-&apos;_.-&apos;|                                  </span><br><span class="line"> |    `-._`-._        _.-&apos;_.-&apos;    |                                  </span><br><span class="line">  `-._    `-._`-.__.-&apos;_.-&apos;    _.-&apos;                                   </span><br><span class="line">      `-._    `-.__.-&apos;    _.-&apos;                                       </span><br><span class="line">          `-._        _.-&apos;                                           </span><br><span class="line">              `-.__.-&apos;                                               </span><br><span class="line"></span><br><span class="line">5367:M 18 Dec 21:15:26.421 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.</span><br><span class="line">5367:M 18 Dec 21:15:26.421 # Server initialized</span><br><span class="line">5367:M 18 Dec 21:15:26.422 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. ...</span><br><span class="line">5367:M 18 Dec 21:15:26.422 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. ...</span><br><span class="line">5367:M 18 Dec 21:15:26.422 * Ready to accept connections</span><br><span class="line">^C5367:signal-handler (1545186523) Received SIGINT scheduling shutdown...</span><br><span class="line">5367:M 18 Dec 21:28:43.443 # User requested shutdown...</span><br><span class="line">5367:M 18 Dec 21:28:43.443 * Saving the final RDB snapshot before exiting.</span><br><span class="line">5367:M 18 Dec 21:28:43.445 * DB saved on disk</span><br><span class="line">5367:M 18 Dec 21:28:43.445 # Redis is now ready to exit, bye bye...</span><br><span class="line">[root@localhost redis-4.0.2]# ^C</span><br><span class="line">[root@localhost redis-4.0.2]#</span><br></pre></td></tr></table></figure></p>
<h2 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h2><p>&emsp;&emsp;若期望服务进程在后台运行，可通过redis.conf文件的daemonize配置项来解决，然后通过指定启动配置文件的方式来启动redis-server，这样就可以实现了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@smart0002 redis-4.0.2]# redis-server /etc/redis.conf </span><br><span class="line">5430:C 19 Dec 11:05:18.557 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo</span><br><span class="line">5430:C 19 Dec 11:05:18.558 # Redis version=4.0.2, bits=64, commit=00000000, modified=0, pid=5430, just started</span><br><span class="line">5430:C 19 Dec 11:05:18.558 # Configuration loaded</span><br><span class="line">[root@smart0002 redis-4.0.2]# ps -ef|grep redis</span><br><span class="line">root      5431     1  0 11:05 ?        00:00:00 redis-server 127.0.0.1:6379 </span><br><span class="line">root      5446 29178  0 11:05 pts/6    00:00:00 grep redis</span><br><span class="line">[root@smart0002 redis-4.0.2]#</span><br></pre></td></tr></table></figure></p>
<h2 id="简单验证"><a href="#简单验证" class="headerlink" title="简单验证"></a>简单验证</h2><p>&emsp;&emsp;在上面安装部署完成后，可通过自带的redis-cli连接进入缓存库（有点类似于mysql的命令操作模式），进入缓存库后可通过一系列的命令达到自己想要的目的（以下仅是很简单的示范）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# redis-cli -h localhost -p 6379</span><br><span class="line">localhost:6379&gt; dbsize</span><br><span class="line">(integer) 4</span><br><span class="line">localhost:6379&gt; keys *</span><br><span class="line">1) &quot;timing_start_192.168.1.137&quot;</span><br><span class="line">2) &quot;access_total_12/18/18&quot;</span><br><span class="line">3) &quot;access_count_192.168.1.137&quot;</span><br><span class="line">4) &quot;ban_time_192.168.1.137&quot;</span><br><span class="line">localhost:6379&gt; get timing_start_192.168.1.137</span><br><span class="line">&quot;1545186401&quot;</span><br><span class="line">localhost:6379&gt;</span><br></pre></td></tr></table></figure></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>
    
    <div>
	  
		  <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">
            ------<i class="fa fa-copyright">2019<a style="font-family:Microsoft YaHei;color:#9D9D9D;border-bottom:none;" href="https://ttfisher.github.io/" title="Lin.C的个人主页"> Lin.C </a></i>------
        </div>
    
</div>
	  
    </div>
    
    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Redis/" rel="tag"># Redis</a>
          
            <a href="/tags/Big-Data/" rel="tag"># Big Data</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/43bed602.html" rel="next" title="Java高级特性系列（四）：好好说说IO其二">
                <i class="fa fa-chevron-left"></i> Java高级特性系列（四）：好好说说IO其二
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/65efd8ff.html" rel="prev" title="Redis扫盲系列（二）：Springboot整合Redis">
                Redis扫盲系列（二）：Springboot整合Redis <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="http://pm4hdun71.bkt.clouddn.com/img/00-head.jpg" alt="Lin.C">
          <p class="site-author-name" itemprop="name">Lin.C</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">74</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ttfisher" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis入门"><span class="nav-number">1.</span> <span class="nav-text">Redis入门</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis是什么"><span class="nav-number">1.1.</span> <span class="nav-text">Redis是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis支持的数据结构"><span class="nav-number">1.2.</span> <span class="nav-text">Redis支持的数据结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis的几大特点"><span class="nav-number">1.3.</span> <span class="nav-text">Redis的几大特点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis的优势"><span class="nav-number">1.4.</span> <span class="nav-text">Redis的优势</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis常用命令"><span class="nav-number">2.</span> <span class="nav-text">Redis常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本操作"><span class="nav-number">2.1.</span> <span class="nav-text">基本操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redis连接"><span class="nav-number">2.2.</span> <span class="nav-text">Redis连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#脚本执行"><span class="nav-number">2.3.</span> <span class="nav-text">脚本执行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#key常用操作"><span class="nav-number">2.4.</span> <span class="nav-text">key常用操作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#string操作（前缀：无）"><span class="nav-number">2.5.</span> <span class="nav-text">string操作（前缀：无）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#hash操作（前缀：H）"><span class="nav-number">2.6.</span> <span class="nav-text">hash操作（前缀：H）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#list操作（前缀：L、R、BL、BR）"><span class="nav-number">2.7.</span> <span class="nav-text">list操作（前缀：L、R、BL、BR）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#set操作（前缀：S）"><span class="nav-number">2.8.</span> <span class="nav-text">set操作（前缀：S）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sorted-set操作（前缀：S）"><span class="nav-number">2.9.</span> <span class="nav-text">sorted set操作（前缀：S）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HyperLogLog"><span class="nav-number">3.</span> <span class="nav-text">HyperLogLog</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是基数"><span class="nav-number">3.1.</span> <span class="nav-text">什么是基数?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四种基数统计方案"><span class="nav-number">3.2.</span> <span class="nav-text">四种基数统计方案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis的发布订阅"><span class="nav-number">4.</span> <span class="nav-text">Redis的发布订阅</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#基本模型"><span class="nav-number">4.1.</span> <span class="nav-text">基本模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令说明"><span class="nav-number">4.2.</span> <span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实例演示"><span class="nav-number">4.3.</span> <span class="nav-text">实例演示</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis的事务"><span class="nav-number">5.</span> <span class="nav-text">Redis的事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#事务特性"><span class="nav-number">5.1.</span> <span class="nav-text">事务特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#命令说明-1"><span class="nav-number">5.2.</span> <span class="nav-text">命令说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#操作实例"><span class="nav-number">5.3.</span> <span class="nav-text">操作实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#补充说明"><span class="nav-number">5.4.</span> <span class="nav-text">补充说明</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Redis的安装"><span class="nav-number">6.</span> <span class="nav-text">Redis的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装步骤"><span class="nav-number">6.1.</span> <span class="nav-text">安装步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#后台运行"><span class="nav-number">6.2.</span> <span class="nav-text">后台运行</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单验证"><span class="nav-number">6.3.</span> <span class="nav-text">简单验证</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lin.C</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.1"></script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  

</body>
</html>
